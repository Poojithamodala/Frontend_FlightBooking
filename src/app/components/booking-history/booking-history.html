<div class="history-container" *ngIf="!loading && history.length">
  <div class="history-grid">
    <div class="booking-card" *ngFor="let booking of history">
      <h3>PNR: {{ booking.pnr }} | {{ booking.tripType }}</h3>
      <p>Airline: {{ booking.airline }}</p>
      <p>From: {{ booking.fromPlace }} → To: {{ booking.toPlace }}</p>
      <p>Departure: {{ booking.departureTime | date:'short' }} | Arrival: {{ booking.arrivalTime | date:'short' }}</p>
      <p>Seats: {{ booking.seatsBooked }} | Total Price: {{ booking.totalPrice }}</p>
      <p>Status: {{ booking.canceled ? 'Cancelled' : 'Confirmed' }}</p>

      <div>
        <h4>Passengers:</h4>
        <ul>
          <li *ngFor="let p of booking.passengers">
            {{ p.name }} ({{ p.gender }}, {{ p.age }} yrs) - Seat: {{ p.seatNumber }}
          </li>
        </ul>
      </div>

      <button *ngIf="!booking.canceled" [disabled]="cancellingPnr === booking.pnr" (click)="cancelBooking(booking.pnr)">
        {{ cancellingPnr === booking.pnr ? 'Cancelling...' : 'Cancel Booking' }}
      </button>
      <hr>
    </div>
  </div>
</div>


<p *ngIf="loading" class="loading">⏳ Loading booking history...</p>
<p *ngIf="successMessage" class="success">
  {{ successMessage }}
</p>

<p *ngIf="errorMessage" class="error">
  {{ errorMessage }}
</p>
<div class="modal-backdrop" *ngIf="showModal">
  <div class="modal">
    <p>{{ modalMessage }}</p>
    <button (click)="closeModal()">OK</button>
  </div>
</div>

<p *ngIf="!loading && history.length === 0" class="empty-state">No booking history found.</p>
<p *ngIf="error" class="error">{{ error }}</p>
